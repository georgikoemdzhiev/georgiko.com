<div class="d-flex flex-column mb-3">
    <h1 class="p-2 font-weight-bold">How to use Serverless Framework to deploy Angular serverless app to AWS</h1>
    <p class="p-2">The <a href="https://serverless.com/">Serverless</a> framework allows us to manage and deploy
        serverless applications on several platforms such as Azure and AWS.
        In this post, I will walk you through the steps of creating a website using Angular 9.0.7 and deploy it using
        the
        Serverless framework to AWS.</p>

    <h3 class="font-weight-bold">Requirements</h3>
    <p>
        <ul>
            <li>Serverless CLI</li>
            <li>Angular CLI</li>
            <li>AWS-CLI</li>
            <li>AWS account</li>
            <li>Code editor such as <a href="https://code.visualstudio.com/">Visual Studio Code</a></li>
            <li>Positive attitude towards life</li>
        </ul>
    </p>

    <h3>Installing the required software</h3>
    <p>Let's start by installing the Serverless framework. If you are on Mac/Linux and have the <code>npm</code>
        package manager, you can install it
        using the command:
        <code>npm install -g serverless</code>.
        If you are on Windows, you will have to use the <a href="https://chocolatey.org/">Chocolatey</a> package manager
        command: <code>choco install serverless</code>.
    </p>

    <p>To install Angular you can use <code>npm</code> again and install it with:
        <code>npm install -g @angular/cli</code>
    </p>

    <h3>Create a new Angular project</h3>
    <p>To create a new project using Angular, open the command line and execute <code>ng new my-serverless-app</code>.
        The command will ask you if you would like "Angular routing".
        This is a personal choice. I pressed "y" to agree to add it. Next, you will be prompted to select a "stylesheet
        format".
        Again, this is a personal choice so choose your prefered style format. I chose SCSS. Your project will now be
        generated by the Angular framework.
        <br>
        <img src="/assets/posts/1/new_proj_hirarchy.png" class="rounded img-fluid" alt="Poject file hirarchy">
        <br><br>
        Run the project by executing <code>ng serve --open</code>. That command will build the project and start a web
        server and open our project in your browser.
        <br>

    </p>

    <h3>Configure the Serverless environment</h3>
    <p>To configure the Serverless environment you will have to add a few files to the root of our project. First, you
        will need to add <code>serverless.yml</code> file. It specifies where our website source folder is and what
        command it should run before deploying our app on AWS. Here is the content of my file:

        <pre>
        # serverless.yml
        name: website

        website:
        component: '@serverless/website'
        inputs:
          code:
            src: dist/my-serverless-app
          #domain: www.your-custom-domain.com
        </pre>
    </p>
    <p>
        That's it, this is all you need to specify to run your web app on AWS. Here, you specify what Serverless
        component you are using, in this case is a <span class="font-italic">website</span>:
        <code>@serverless/website</code>. It also specifies where is the source code using one <span
            class="font-italic">input</span> called <code>code</code>.

        <br>

        If you own a domain purchased from AWS Route 53, you can uncomment the <code>domain</code> input in the
        <code>serverless.yml</code> file and run <code>serverless</code> in the terminal again. The Serverless framework
        will acknowledge the presence of the new input and set up a CloudFront CDN as well as SSL certificate for you.
        <mark>Please note that the domain must be purchased from AWS Route 53 to work with the website
            component.</mark>
    </p>

    <p>
        Next, you need to add <code>.env</code> file to the root of our project. It will contain the AWS AMI user
        credentials needed
        for the Serverless framework to authenticate with AWS and deploy our app. I would recommend that you create a
        new IAM user specifically for the Serverless framework. So in AWS, create a new IAM user and grant it <span
            class="font-italic">Programmatic access</span>:

        <br>
        <img src="/assets/posts/1/iam_add_user_1.png" class="rounded img-fluid" alt="IAM user with Programmatic access">

        <br><br>
        Next, give the user <span class="font-weight-bold">AdministratorAccess</span> policy. When you are finished with
        the
        IAM user creation, populate the <code>.env</code> file with the IAM user <span class="font-weight-bold">Access
            key
            ID</span> & <span class="font-weight-bold">Secret access key</span> credentials like
        so:

        <br>
        <img src="/assets/posts/1/env_file.png" class="rounded img-fluid" alt="Env file content">
    </p>

    <h3>Deployment</h3>
    <p>By that point, you should have everything you need to deploy our Angular web app to AWS. If you haven't yet, make
        sure that you build your project. So in the terminal, type <code>ng build --prod</code> and press
        <kbd>Enter</kbd>. Then type
        <code>serverless</code> and press <kbd>Enter</kbd> again. The Serverless framework will begin deploying your
        Website
        to AWS.
        <br><br>
        <img src="/assets/posts/1/deployment.png" class="rounded img-fluid"
            alt="Building and deployung the Angular web app to AWS">

        <br><br>
        You should be able to go to the above URL and access your website.
    </p>

    <h3>Conclusion</h3>
    <p>The Serverless framework provides a great way for you to get started with AWS and easily manage your serverless
        app. If you would like to check out the source code of my website - <span
            class="font-italic">georgiko.com</span></a>, which
        is built with the same steps as above, you can go to my website's <a
            href="https://github.com/georgikoemdzhiev/georgiko.com">github repo</a> and clone it.
    </p>



</div>