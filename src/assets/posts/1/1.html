<div class="d-flex flex-column mb-3">
    <h1 class="p-2 font-weight-bold">How to use Serverless Framework to deploy Angular serverless app to AWS</h1>
    <p class="p-2">The <a href="https://serverless.com/">Serverless</a> framework allow us to manage and deploy
        serverless applications on several platforms such as Azure and AWS.
        In this post, I will walk you through the steps of creating a website using Angular 9.0.7 and deploy it using
        the
        Serverless framework to AWS.</p>

    <h3 class="font-weight-bold">Requirements</h3>
    <p>
        <ul>
            <li>Serverless CLI</li>
            <li>Angular CLI</li>
            <li>AWS-CLI</li>
            <li>AWS account</li>
            <li>Code editor such as <a href="https://code.visualstudio.com/">Visual Studio Code</a></li>
            <li>Possitive attitude towards life</li>
        </ul>
    </p>

    <h3>Installing the required software</h3>
    <p>Lets start by installing the Serverless framework. If you are on Mac/Linux and have the <code>npm</code>
        machage manager you can install it
        using the command:
        <code>npm install -g serverless</code>.
        If you are on Windows you will have to use the <a href="https://chocolatey.org/">Chocolatey</a> machage manager
        command: <code>choco install serverless</code>.
    </p>

    <p>To install Angular we can use <code>npm</code> again and install it with:
        <code>npm install -g @angular/cli</code>
    </p>

    <h3>Create a new Angular project</h3>
    <p>To creata a new project using Angular, open the command line and execute: <code>ng new my-serverless-app</code>.
        The command will ask you if you would like "Angular routing".
        This is a personal choice. I pressed "y" to agree adding it. Next, you will be prompted to select a "stylesheet
        format".
        Again, this is a personal choice so choose your prefered stype format. I chose SCSS. Your project will now be
        generated by the Angular framework.
        <br>
        <img src="/assets/posts/1/new_proj_hirarchy.png" class="rounded img-fluid" alt="Poject file hirarchy">
        <br><br>
        Run the project by executing <code>ng serve --open</code>. That command will build the project and start a web
        server and open our project in your browser.
        <br>

    </p>

    <h3>Configure the Serverless environment</h3>
    <p>To configure the Serverless environment we will have to add a few files to the root of our project. First, we
        will need to add <code>serverless.yml</code> file. It specifies where our website source folder is and what
        command it should run before deploying our app on AWS. Here is the content of my file:

        <pre><code>
            # serverless.yml
            component: "@serverless/website"
            inputs:
              code:
                src: dist/my-serverless-app
                hook: ng build
              region: eu-west-1 # optional. Default is us-east-1 
              # uncomment if you would like to specify bucketname
              # bucketName: georgikowebsite
              env: # Environment variables to include in a 'env.js' file with your uploaded code.
                API_URL: https://api.georgiko.com
              # uncomment if you have a domain purchased from AWS
              # domain: www.georgiko.com
            </code></pre>
    </p>
    <p>
        Here, we specify what Serverless component we will be using. In our case is a website
        <code>@serverless/website</code>. The Serverless Components contains all of the needed logic to deploy our
        serverless app. All we have to do is to specify a few <span class="font-italic">inputs</span>.
        For example, above we specify where our website source code is <code>src: dist/my-serverless-app</code> (that is
        the location where Angular will build our website).
        Also, we specify a <code>hook</code> which is a script that Serverless framwork will execute before it deploys
        our app to AWS. In this case we run <code>ng build</code> which
        will tell Angular to build our website.
    </p>

    <p>
        Next we need to add <code>.env</code> file to our project. It will contain the AWS AMI user credentials needed
        for the Serverless framework to authenticate with AWS and deploy our app. 
    </p>

</div>